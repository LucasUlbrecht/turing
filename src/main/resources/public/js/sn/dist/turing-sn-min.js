var turingSNApp=angular.module("turingSNApp","ngCookies ngResource ngAnimate ngSanitize ui.router ui.bootstrap pascalprecht.translate angularMoment".split(" "));
turingSNApp.config(["$stateProvider","$urlRouterProvider","$locationProvider","$translateProvider",function(a,b,d,c){c.useSanitizeValueStrategy("escaped");d.html5Mode(!0);c.translations("en",{REMOVE:"Remove",FIRST:"First",LAST:"LAST",PREVIOUS:"Previous",NEXT:"Next",SEARCH:"Search",SEARCH_FOR:"Search for",NO_RESULTS_FOUND:"No results found",APPLIED_FILTERS:"Applied Filters",FOUND:"Found",RESULTS_FOR_THE_TERM:"results for the term"});c.translations("pt",{REMOVE:"Remover",FIRST:"Primeiro",LAST:"\u00daltimo",
PREVIOUS:"Anterior",NEXT:"Pr\u00f3ximo",SEARCH:"Pesquisar",SEARCH_FOR:"Pesquisar por",NO_RESULTS_FOUND:"Nenhum resultado encontrado",APPLIED_FILTERS:"Filtros Aplicados",FOUND:"Encontrados",RESULTS_FOR_THE_TERM:"resultados para o termo"});c.fallbackLanguage("en")}]);
turingSNApp.service("turAPIServerService",["$http","$location","$cookies",function(a,b,d){var c=b.protocol(),g=b.host();b=b.port();var e=c+"://"+g+":"+b+"/api";console.log(e);this.get=function(){if(null!=d.get("turAPIServer"))return d.get("turAPIServer");a({method:"GET",url:e}).then(function(a){d.put("turAPIServer",e)},function(a){d.put("turAPIServer","http://localhost:2700/api")});return e}}]);
turingSNApp.factory("vigLocale",["$window",function(a){return{getLocale:function(){var b=a.navigator;return angular.isArray(b.languages)&&0<b.languages.length?b.languages[0].split("-").join("_"):(b.language||b.browserLanguage||b.systemLanguage||b.userLanguage||"").split("-").join("_")}}}]);
turingSNApp.controller("TurSNMainCtrl",["$scope","$http","$window","$state","$rootScope","$translate","$location","turSNSearch","amMoment","vigLocale",function(a,b,d,c,g,e,f,h,k,l){a.vigLanguage=l.getLocale().substring(0,2);e.use(a.vigLanguage);k.changeLocale("en");a.total=0;b=f.path().trim();b.endsWith("/")&&(b=b.substring(0,b.length-1));b=b.split("/");a.turSiteName=b[b.length-1];a.init=function(){a.turQuery=f.search().q;a.turPage=f.search().p;a.turLocale=f.search()._setlocale;a.turSort=f.search().sort;
a.turFilterQuery=f.search()["fq[]"];a.initParams(a.turQuery,a.turPage,a.turLocale,a.turSort,a.turFilterQuery)};a.initParams=function(b,c,d,e,f){h.search(a.turSiteName,b,c,d,e,f).then(function(b){a.total=b.data.description["query-context"].count;a.results=b.data.description.results.document;a.pages=b.data.description.pagination.page;a.facets=b.data.description.widget["facet-widget"]},function(a){})};a.initURL=function(b,c,d,e,f){h.searchURL(b,c,d,e,f).then(function(b){a.total=b.data.description["query-context"].count;
a.results=b.data.description.results.document;a.pages=b.data.description.pagination.page;a.facets=b.data.description.widget["facet-widget"]},function(a){})};a.init();g.$state=c;a.turRedirect=function(b){a.initURL(b)};a.replaceUrlSearch=function(b){return urlFormatted=b.replace("/api/sn/"+a.turSiteName+"/search","/sn/"+a.turSiteName)}}]);
turingSNApp.factory("turSNSearch",["$http","turAPIServerService",function(a,b){return{search:function(d,c,g,e,f,h){c={params:{q:c,p:g,_setlocale:e,sort:f,"fq[]":h},headers:{Accept:"application/json"}};return a.get(b.get().concat("/sn/"+d+"/search"),c)},searchURL:function(d){urlFormatted=d.replace("/api/","/");return a.get(b.get().concat(urlFormatted),{headers:{Accept:"application/json"}})}}}]);