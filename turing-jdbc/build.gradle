buildscript {
 	ext {
        tika = '2.3.0'
    }
	repositories {
		mavenCentral()
		 jcenter()
	}
}

plugins {
  id 'com.github.johnrengelman.shadow' version "7.1.2"
  id 'java'
  id 'eclipse'
  id "org.sonarqube" version "3.3"
}

group = 'com.viglet.turing.jdbc'

description = "turing-jdbc"

sourceCompatibility = 14
targetCompatibility = 14

tasks.withType(JavaCompile) {
	options.encoding = 'UTF-8'
}

sonarqube {
  properties {
    property "sonar.projectKey", "turing-jdbc"
    property "sonar.organization", "viglet-turing"
    property "sonar.host.url", "https://sonarcloud.io"
  }
}

jar {
    baseName = 'turing-jdbc'
    version =  '0.3.6'
    manifest {
		attributes 'Main-Class': 'com.viglet.turing.tool.jdbc.TurJDBCImportTool'
	}
}

shadowJar {
   baseName = 'turing-jdbc'
   classifier = null
}

repositories {
    mavenCentral()
}

configurations {
    all*.exclude group: 'xml-apis'
}

dependencies {
	implementation group: 'com.beust', name: 'jcommander', version: '1.82'	
	implementation group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.13.2.2'	
	implementation group: 'org.json', name: 'json', version:'20220320'
	implementation group: 'org.apache.httpcomponents', name: 'httpclient', version:'4.5.13'
	implementation group: 'org.apache.logging.log4j', name: 'log4j-core', version:'2.17.2'
  	implementation project(':turing-java-sdk')
	
	// Tika
    implementation group: 'org.apache.tika', name: 'tika-core', version:"${tika}"
    implementation group: 'org.apache.tika', name: 'tika-parsers', version:"${tika}"
    implementation group: 'org.apache.tika', name: 'tika-parser-pdf-module', version: "${tika}"
    implementation group: 'org.apache.tika', name: 'tika-parser-text-module', version: "${tika}"
    implementation group: 'org.apache.tika', name: 'tika-parser-ocr-module', version: "${tika}"
    implementation group: 'org.apache.tika', name: 'tika-parser-microsoft-module', version: "${tika}"
    implementation group: 'com.levigo.jbig2', name: 'levigo-jbig2-imageio', version: '2.0'
    implementation group: 'com.github.jai-imageio', name: 'jai-imageio-core', version: '1.4.0'
    implementation group: 'com.github.jai-imageio', name: 'jai-imageio-jpeg2000', version: '1.4.0'
    implementation group: 'org.xerial', name: 'sqlite-jdbc', version: '3.36.0.3'
    implementation group: 'com.github.jai-imageio', name: 'jai-imageio-jpeg2000', version: '1.4.0'
    
    // Commons
    implementation group: 'commons-io', name: 'commons-io', version: '2.11.0'
    
    // Oracle
    implementation group: 'com.oracle.ojdbc', name: 'ojdbc8', version: '19.3.0.0'
    
	// MariaDB
    implementation group: 'org.mariadb.jdbc', name: 'mariadb-java-client', version: '3.0.4'

    // PostgreSQL
    implementation group: 'org.postgresql', name: 'postgresql', version: '42.3.4'
    
    // Jsoup
    implementation group: 'org.jsoup', name: 'jsoup', version: '1.14.3'
}

jar.enabled = false
build.dependsOn shadowJar
