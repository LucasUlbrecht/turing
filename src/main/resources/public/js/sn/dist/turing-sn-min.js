var turingSNApp=angular.module("turingSNApp","ngCookies ngResource ngAnimate ngSanitize ui.router ui.bootstrap pascalprecht.translate angularMoment".split(" "));
turingSNApp.config(["$stateProvider","$urlRouterProvider","$locationProvider","$translateProvider",function(b,a,d,c){c.useSanitizeValueStrategy("escaped");d.html5Mode(!0);c.translations("en",{REMOVE:"Remove",FIRST:"First",LAST:"Last",PREVIOUS:"Previous",NEXT:"Next",SEARCH:"Search",SEARCH_FOR:"Search for",NO_RESULTS_FOUND:"No results found",APPLIED_FILTERS:"Applied Filters",SHOWING:"Showing",OF:"of",RESULTS:"results"});c.translations("pt",{REMOVE:"Remover",FIRST:"Primeiro",LAST:"\u00daltimo",PREVIOUS:"Anterior",
NEXT:"Pr\u00f3ximo",SEARCH:"Pesquisar",SEARCH_FOR:"Pesquisar por",NO_RESULTS_FOUND:"Nenhum resultado encontrado",APPLIED_FILTERS:"Filtros Aplicados",SHOWING:"Exibindo",OF:"de",RESULTS:"resultados"});c.fallbackLanguage("en")}]);
turingSNApp.service("turAPIServerService",["$http","$location","$cookies",function(b,a,d){var c=a.protocol(),g=a.host();a=a.port();var f=c+"://"+g+":"+a+"/api";console.log(f);this.get=function(){if(null!=d.get("turAPIServer"))return d.get("turAPIServer");b({method:"GET",url:f}).then(function(b){d.put("turAPIServer",f)},function(b){d.put("turAPIServer","http://localhost:2700/api")});return f}}]);
turingSNApp.factory("vigLocale",["$window",function(b){return{getLocale:function(){var a=b.navigator;return angular.isArray(a.languages)&&0<a.languages.length?a.languages[0].split("-").join("_"):(a.language||a.browserLanguage||a.systemLanguage||a.userLanguage||"").split("-").join("_")}}}]);
turingSNApp.controller("TurSNMainCtrl",["$scope","$http","$window","$state","$rootScope","$translate","$location","turSNSearch","amMoment","vigLocale","$location","$anchorScroll",function(b,a,d,c,g,f,e,h,k,l,e,m){b.vigLanguage=l.getLocale().substring(0,2);f.use(b.vigLanguage);k.changeLocale("en");b.pageCount=0;b.pageStart=0;b.pageEnd=0;a=e.path().trim();a.endsWith("/")&&(a=a.substring(0,a.length-1));a=a.split("/");b.turSiteName=a[a.length-1];b.init=function(){b.turQuery=e.search().q;b.turPage=e.search().p;
b.turLocale=e.search()._setlocale;b.turSort=e.search().sort;b.turFilterQuery=e.search()["fq[]"];b.initParams(b.turQuery,b.turPage,b.turLocale,b.turSort,b.turFilterQuery)};b.initParams=function(a,c,d,e,f){if(null==a||0==a.trim().length)a="*";h.search(b.turSiteName,a,c,d,e,f).then(function(a){b.pageCount=a.data.queryContext.count;b.pageStart=a.data.queryContext.pageStart;b.pageEnd=a.data.queryContext.pageEnd;b.results=a.data.results.document;b.pages=a.data.pagination;b.facets=a.data.widget.facet;b.facetsToRemove=
a.data.widget.facetToRemove},function(b){})};b.initURL=function(a,c,d,e,f){h.searchURL(a,c,d,e,f).then(function(a){b.pageCount=a.data.queryContext.count;b.pageStart=a.data.queryContext.pageStart;b.pageEnd=a.data.queryContext.pageEnd;b.results=a.data.results.document;b.pages=a.data.pagination;b.facets=a.data.widget.facet;b.facetsToRemove=a.data.widget.facetToRemove},function(b){})};b.init();g.$state=c;b.turRedirect=function(a){e.hash("turHeader");m();b.initURL(a)};b.replaceUrlSearch=function(a){return urlFormatted=
a.replace("/api/sn/"+b.turSiteName+"/search","/sn/"+b.turSiteName)}}]);turingSNApp.factory("turSNSearch",["$http","turAPIServerService",function(b,a){return{search:function(d,c,g,f,e,h){c={params:{q:c,p:g,_setlocale:f,sort:e,"fq[]":h},headers:{Accept:"application/json"}};return b.get(a.get().concat("/sn/"+d+"/search"),c)},searchURL:function(d){urlFormatted=d.replace("/api/","/");return b.get(a.get().concat(urlFormatted),{headers:{Accept:"application/json"}})}}}]);