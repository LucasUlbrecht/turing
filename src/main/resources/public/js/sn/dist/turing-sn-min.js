var turingSNApp=angular.module("turingSNApp","ngCookies ngResource ngAnimate ngSanitize ui.router ui.bootstrap pascalprecht.translate angularMoment".split(" "));turingSNApp.config(["$stateProvider","$urlRouterProvider","$locationProvider","$translateProvider",function(a,b,d,c){c.useSanitizeValueStrategy("escaped");d.html5Mode(!0);c.translations("en",{REMOVE:"Remove"});c.translations("pt",{REMOVE:"Remover"});c.fallbackLanguage("en")}]);
turingSNApp.service("turAPIServerService",["$http","$location","$cookies",function(a,b,d){var c=b.protocol(),g=b.host();b=b.port();var f=c+"://"+g+":"+b+"/api";console.log(f);this.get=function(){if(null!=d.get("turAPIServer"))return d.get("turAPIServer");a({method:"GET",url:f}).then(function(a){d.put("turAPIServer",f)},function(a){d.put("turAPIServer","http://localhost:2700/api")});return f}}]);
turingSNApp.controller("TurSNMainCtrl",["$scope","$http","$window","$state","$rootScope","$translate","$location","turSNSearch","amMoment",function(a,b,d,c,g,f,e,h,k){k.changeLocale("en");a.total=0;b=e.path().trim();b.endsWith("/")&&(b=b.substring(0,b.length-1));b=b.split("/");a.turSiteName=b[b.length-1];a.init=function(){a.turQuery=e.search().q;a.turPage=e.search().p;a.turLocale=e.search()._setlocale;a.turSort=e.search().sort;a.turFilterQuery=e.search()["fq[]"];a.initParams(a.turQuery,a.turPage,
a.turLocale,a.turSort,a.turFilterQuery)};a.initParams=function(b,c,d,e,f){h.search(a.turSiteName,b,c,d,e,f).then(function(b){a.total=b.data["rdf:Description"]["otsn:query-context"]["otsn:count"];a.results=b.data["rdf:Description"]["otsn:results"]["otsn:document"];a.pages=b.data["rdf:Description"]["otsn:pagination"]["otsn:page"];a.facets=b.data["rdf:Description"]["otsn:widget"]["otsn:facet-widget"]},function(a){})};a.initURL=function(b,c,d,e,f){h.searchURL(b,c,d,e,f).then(function(b){a.total=b.data["rdf:Description"]["otsn:query-context"]["otsn:count"];
a.results=b.data["rdf:Description"]["otsn:results"]["otsn:document"];a.pages=b.data["rdf:Description"]["otsn:pagination"]["otsn:page"];a.facets=b.data["rdf:Description"]["otsn:widget"]["otsn:facet-widget"]},function(a){})};a.init();a.test="Alexandre";g.$state=c;a.turRedirect=function(b){a.initURL(b)};a.replaceUrlSearch=function(b){return urlFormatted=b.replace("/api/sn/"+a.turSiteName+"/search","/sn/"+a.turSiteName)}}]);
turingSNApp.factory("turSNSearch",["$http","turAPIServerService",function(a,b){return{search:function(d,c,g,f,e,h){c={params:{q:c,p:g,_setlocale:f,sort:e,"fq[]":h},headers:{Accept:"application/json"}};return a.get(b.get().concat("/sn/"+d+"/search"),c)},searchURL:function(d){urlFormatted=d.replace("/api/","/");return a.get(b.get().concat(urlFormatted),{headers:{Accept:"application/json"}})}}}]);