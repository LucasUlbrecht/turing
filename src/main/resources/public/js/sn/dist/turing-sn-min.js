var turingSNApp=angular.module("turingSNApp","ngCookies ngResource ngAnimate ngSanitize ui.router ui.bootstrap pascalprecht.translate angularMoment".split(" "));turingSNApp.config(["$stateProvider","$urlRouterProvider","$locationProvider","$translateProvider",function(a,c,b,d){d.useSanitizeValueStrategy("escaped");b.html5Mode(!0)}]);
turingSNApp.service("turAPIServerService",["$http","$location","$cookies",function(a,c,b){var d=c.protocol(),g=c.host();c=c.port();var e=d+"://"+g+":"+c+"/api";console.log(e);this.get=function(){if(null!=b.get("turAPIServer"))return b.get("turAPIServer");a({method:"GET",url:e}).then(function(a){b.put("turAPIServer",e)},function(a){b.put("turAPIServer","http://localhost:2700/api")});return e}}]);
turingSNApp.controller("TurSNMainCtrl",["$scope","$http","$window","$state","$rootScope","$translate","$location","turSNSearch","amMoment",function(a,c,b,d,g,e,f,h,k){k.changeLocale("en");a.total=0;a.init=function(){a.turQuery=f.search().q;a.turPage=f.search().p;a.turLocale=f.search()._setlocale;a.turSort=f.search().sort;a.turFilterQuery=f.search()["fq[]"];console.log(a.turFilterQuery);a.initParams(a.turQuery,a.turPage,a.turLocale,a.turSort,a.turFilterQuery)};a.initParams=function(b,c,d,e,f){h.search(b,
c,d,e,f).then(function(b){a.total=b.data["rdf:Description"]["otsn:query-context"]["otsn:count"];a.results=b.data["rdf:Description"]["otsn:results"]["otsn:document"];a.pages=b.data["rdf:Description"]["otsn:pagination"]["otsn:page"];a.facets=b.data["rdf:Description"]["otsn:widget"]["otsn:facet-widget"]},function(a){})};a.initURL=function(b,c,d,e,f){h.searchURL(b,c,d,e,f).then(function(b){a.total=b.data["rdf:Description"]["otsn:query-context"]["otsn:count"];a.results=b.data["rdf:Description"]["otsn:results"]["otsn:document"];
a.pages=b.data["rdf:Description"]["otsn:pagination"]["otsn:page"];a.facets=b.data["rdf:Description"]["otsn:widget"]["otsn:facet-widget"]},function(a){})};a.init();a.test="Alexandre";g.$state=d;a.turRedirect=function(b){a.initURL(b)};a.replaceUrlSearch=function(a){return urlFormatted=a.replace("/api/otsn/search/theme/json","/sn/")}}]);
turingSNApp.factory("turSNSearch",["$http","turAPIServerService",function(a,c){return{search:function(b,d,g,e,f){b={params:{q:b,p:d,_setlocale:g,sort:e,"fq[]":f},headers:{Accept:"application/json"}};return a.get(c.get().concat("/otsn/search/theme/json"),b)},searchURL:function(b){console.log("a1:"+b);urlFormatted=b.replace("/api/","/");return a.get(c.get().concat(urlFormatted),{headers:{Accept:"application/json"}})}}}]);